
<style type="text/css">
		.checked {
			color: orange;
		}
</style>

<nav class="navbar navbar-expand navbar-dark bg-dark static-top" style="display: flex; justify-content: space-between;" >

    <a class="navbar-brand mr-1" href="/teacher/home"><h4>HỆ THỐNG HỌC TRỰC TUYẾN</h4></a>
    <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#" style="text-align: left;">
      <i class="fas fa-bars"></i>
    </button>
    {{!-- <button style="margin-left: -650px;"class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
      <i class="fas fa-bars"></i>
    </button> --}}

    <!-- Navbar -->
    <ul class="navbar-nav ml-auto ml-md-0">
      <li class="nav-item dropdown no-arrow mx-1">
        <h5 style="color: aliceblue;">Giáo viên {{userInfo.name}}</h5>
      </li>
      <li class="nav-item dropdown no-arrow">
        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-user-circle fa-fw"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
          
          <a class="dropdown-item" href="/teacher/profile">Hồ sơ cá nhân</a>
          <a class="dropdown-item" href="/changePassword">Đổi mật khẩu</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/teacher/logout" data-toggle="modal" data-target="#logoutModal">Đăng xuất</a>
        </div>
      </li>
    </ul>

  </nav>

  <div id="wrapper">

    <!-- Sidebar -->
      <ul class="sidebar navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Mục lục</span>
        </a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="pagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-fw fa-folder"></i>
          <span>Quản lý học tập</span>
        </a>
        <div style="width: 100%" class="dropdown-menu" aria-labelledby="pagesDropdown">
                  <a class="dropdown-item" href="/teacher/manage-courses">Quản lý khóa học giảng dạy</a>
                 
        </div>
      </li>          

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="pagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-fw fa-folder"></i>
          <span>Cài đặt</span>
        </a>
        <div style=" width:100%" class="dropdown-menu" aria-labelledby="pagesDropdown">
          <a class="dropdown-item" href="/teacher/profile">Hồ sơ cá nhân</a>
          <a class="dropdown-item" href="/teacher/changePassword">Đổi mật khẩu</a>
          <a class="dropdown-item" href="/teacher/contact">Thông tin liên hệ</a>
        </div>
      </li>  
      
    </ul>

    <div id="content-wrapper">

      <div class="container-fluid">

        <!-- Breadcrumbs-->
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="/teacher/home">Màn hình chính</a>
          </li>
          <li class="breadcrumb-item active">Hồ sơ cá nhân Admin</li>
          
        </ol>

        <form action="/teacher/profile" method="POST">
              <div class="container rounded bg-white mt-5 mb-5">
            <div class="row">
                <div class="col-md-12 ">
                    <div class="p-3 py-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h3 class="text-right" style="color: blue;">Chỉnh sửa hồ sơ cá nhân giáo viên {{userInfo.name}}</h3>
                        </div>
                        <div class="form-group">
										  	<label for="usr"><h5>Họ và tên:</h5></label>
										  	<input value="{{userInfo.name}}" name="name" type="text" class="form-control" id="usr" placeholder="Họ và tên" minlength="5">
										</div>
										<div class="form-group">
										  	<label for="email"><h5>Email:</h5></label>
										  	<input value="{{userInfo.email}}" name="email" type="email" class="form-control" id="email" placeholder="{{userInfo.email}}" minlength="5" disabled>
										</div> 
										<!--Tạm thời xử lý khi chưa append API địa chỉ-->
										<div class="form-group">
										  	<label for="address"><h5>Địa chỉ:</h5></label>
										  	<hr>
										</div> 
										<div class="form-group" style="display: flex;" >
										  	<p>Tỉnh/Thành phố :</p>&nbsp;&nbsp;
										  	<select name="province" id="province" >
												  <option value="{{province}}" selected>Chọn {{province}}</option>
												  <option id="92" value="Thành phố Cần Thơ">Thành phố Cần Thơ</option>
												  <option id="48" value="Thành phố Đà Nẵng">Thành phố Đà Nẵng</option>
												  <option id="01" value="hành phố Hà Nội">Thành phố Hà Nội</option>
												  <option id="31" value="Thành phố Hải Phòng">Thành phố Hải Phòng</option>
													<option id="79" value="Thành phố Hồ Chí Minh">Thành phố Hồ Chí Minh</option>
												  <option id="89" value="Tỉnh An Giang">Tỉnh An Giang</option>
												  <option id="77" value="Tỉnh Bà Rịa - Vũng Tàu">Tỉnh Bà Rịa - Vũng Tàu</option>
												  <option id="24" value="Tỉnh Bắc Giang">Tỉnh Bắc Giang</option>

											</select>
										</div> 
										<div class="form-group" style="display: flex;">
											<p>Quận/Huyện :</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											<select name="district" id="district" >
												  <option value="" selected>Chọn {{district}}</option>
											</select>
										</div>
										<div class="form-group" style="display: flex;">
											<p>Số nhà hoặc xã/phường</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											<input value="{{detailAddress}}" name="detailAddress" type="text" class="form-control" id="" placeholder=" Ví dụ : Số 14 khu tập thể 3 tầng" minlength="5" >
										</div>
										<hr>
										
										{{#if notification}}
											<script>
												alert('Bạn đã chỉnh sửa thông tin thành công')
											</script>
										{{/if}}
										<!--
											<div class="form-group">
										  		<label for="address">Tỉnh / Thành phố</label>
												<div class="">
														
												</div>
											</div>
											<div class="form-group">
													<label for="address">Huyện</label>
													<div class="">
															<select class="form-control" name="province">
															
															</select>
													</div>
											</div>
										-->
										
										
										<div class="form-group">
										  	<label for="address"><h5>Số điện thoại:</h5></label>
										  	<input value="{{userInfo.telephone}}" name="telephone" type="text" class="form-control" id="address" placeholder="Số điện thoại" minlength="5">
										</div> 
										<div class="form-group">
											
										  	<label for="address"><h5>Ngày tháng năm sinh</h5></label>
										  	<input type="date" id="birthday" name="birthday" value="{{userInfo.birthday}}">
										</div> 
										<div class="form-group">
										  	<label for="address"><h5>Giới tính</h5></label>
											<div class="">
										  			<select class="form-control" name="gender">
										  				<option value="{{userInfo.gender}}">Choosen {{userInfo.gender}}</option>
										  				<option value="male">Nam</option>
										  				<option value="female">Nữ</option>
										  				<option value="khác">Khác</option>
										  			</select>
										  	</div>
										</div> 
											<div class="form-group">
														<div class="form-group">
															<label for="avatar"><h5>Avatar</h5></label>
															<img width="100" height="120" id="imgprofile" class="rounded-circle mt-5" src="http://localhost:3000/{{userInfo.linkImg}}"><span class="font-weight-bold"></span><span class="text-black-50"></span>
															<input class="form-control" type="file" id="myfile" name="myFile" multiple>
															<input type="text" style="display: none;" id="assignLink" name="assignLink" value="{{userInfo.linkImg}}">
														</div>
														<div class="form-group">
															<input onclick="send()" id="btnupload" class="btn btn-outline-success" type="button" value="Upload">
														</div>
											</div>
											<input type="hidden" value="{{userInfo.linkImg}}"></input>
										<!--Trình độ học vấn-->
											<div class="form-group">
													<label for="address"><h5>Trình độ học vấn</h5></label>
													<textarea id="compose-textarea" class="form-control" style="height: 100px" name="knowledge">{{userInfo.knowledge}}</textarea>
											</div> 
                                            <div class="form-group">
													<label for="address"><h5>Kinh nghiệm</h5></label>
													<textarea id="compose-textarea" class="form-control" style="height: 100px" name="experience" >{{userInfo.experience}}</textarea>
											</div> 
                                            

 
                        <div class="mt-5 text-center"><button class="btn btn-primary profile-button" type="submit">Lưu thông tin</button></div>
                    </div>
                </div>
                
            </div>
        </form>
        
</div>
</div>
</div>
        <!-- Icon Cards-->
        
      <!-- /.container-fluid -->
      
    <!-- /.content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!--Logout model-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" >
          <h5 class="modal-title" id="exampleModalLabel">Logout</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close" style="text-align: right;">
            <span aria-hidden="true" >×</span>
          </button>
        </div>
        <div class="modal-body"><h5>Chọn đăng xuất để kết thúc phiên làm việc</h5></div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Hủy bỏ</button>
          <a class="btn btn-outline-danger" href="http://localhost:3000/teacher/logout">Đăng Xuất</a>
        </div>
      </div>
    </div>
  </div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="http://localhost:3000/js/Chart.min.js"></script>
<script>
  var send = function(){
    let myfile = document.getElementById('myfile').files;
    let formData = new FormData();
    for(let i = 0 ; i<myfile.length ; i++){
      formData.append('myfile',myfile[i]);
    }
    let contentType = {
      headers :{
        "content-type":"multipart/form-data"
      }
    }
    let link = '';
    axios.post('http://localhost:3000/admin/profile/uploadPictureProfile',formData,contentType)
      .then(function (response) {
          link = response.data.filename;
          $("#imgprofile").attr("src", "http://localhost:3000/"+link);
          $('#assignLink').val(link);
      })
      .catch(function (error) {
          console.log(error);
    });
    
    
  }
</script>

<script>
			
			$('#province').on('change',function(){
				console.log('Thông tin tên tỉnh là :')
				let provinceValue = $(this).children(":selected").attr("id");
				console.log(provinceValue);
				$.ajax({
					type:'POST',
					url:`http://localhost:3000/getDistrict/${provinceValue}`,
					success : function(result){
						$('#district').empty();
						console.log('Thông tin của các huyện lấy về được');
                        console.log(result.bla);
						$.each(result.bla, function (i, item) {
							$('#district').append($('<option>', { 
								value: item,
								text : item
							}));
						});
					}
				})
			})
			
</script>

    <!-- Bootstrap core JavaScript-->
<script src="http://localhost:3000/vendor/jquery/jquery.min.js"></script>
<script src="http://localhost:3000/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
<script src="http://localhost:3000/vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Page level plugin JavaScript-->
<script src="http://localhost:3000/vendor/chart.js/Chart.min.js"></script>
<script src="http://localhost:3000/vendor/datatables/jquery.dataTables.js"></script>
<script src="http://localhost:3000/vendor/datatables/dataTables.bootstrap4.js"></script>

    <!-- Custom scripts for all pages-->
<script src="http://localhost:3000/js/sb-admin.min.js"></script>

    <!-- Demo scripts for this page-->
<script src="http://localhost:3000/js/demo/datatables-demo.js"></script>
<script src="http://localhost:3000/js/demo/chart-area-demo.js"></script>
